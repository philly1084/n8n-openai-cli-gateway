providers:
  - id: gemini-cli
    type: cli
    description: Gemini via OpenCode + Google OAuth plugin
    models:
      - id: gemini-2.5-pro
        providerModel: google/gemini-2.5-pro
        fallbackModels:
          - gpt-4.1
      - id: gemini-2.5-flash
        providerModel: google/gemini-2.5-flash
        fallbackModels:
          - gpt-4.1
    responseCommand:
      executable: opencode
      args:
        - run
        - --model
        - "{{provider_model}}"
        - --format
        - default
        - "{{prompt}}"
      input: prompt_stdin
      output: text
      timeoutMs: 240000
    auth:
      loginCommand:
        executable: opencode
        args:
          - auth
          - login
        timeoutMs: 900000
      statusCommand:
        executable: sh
        args:
          - -c
          - opencode auth list | grep -qi google
        timeoutMs: 30000
      # Example: Rate limit check command
      # This should output JSON with rate limit information
      # rateLimitCommand:
      #   executable: opencode
      #   args:
      #     - account
      #     - limits
      #     - --json
      #   timeoutMs: 30000

  - id: antigravity-cli
    type: cli
    description: Antigravity CLI adapter
    models:
      - id: antigravity-default
        providerModel: default
    responseCommand:
      executable: antigravity
      args:
        - chat
        - --model
        - "{{provider_model}}"
        - --json
      input: request_json_stdin
      output: json_contract
      timeoutMs: 240000
    auth:
      loginCommand:
        executable: antigravity
        args:
          - auth
          - login
          - --no-browser
        timeoutMs: 900000
      statusCommand:
        executable: antigravity
        args:
          - auth
          - status
          - --json
        timeoutMs: 30000

  - id: codex-cli
    type: cli
    description: OpenAI Codex app-server bridge adapter
    models:
      - id: codex-latest
        providerModel: codex-latest
        fallbackModels:
          - gemini-2.5-pro
      - id: gpt-4.1
        providerModel: gpt-4.1
        fallbackModels:
          - gemini-2.5-flash
    responseCommand:
      executable: node
      args:
        - dist/scripts/codex-appserver-bridge.js
        - --model
        - "{{provider_model}}"
      input: request_json_stdin
      output: json_contract
      timeoutMs: 240000
    auth:
      loginCommand:
        executable: codex
        args:
          - login
          - --no-browser
        timeoutMs: 900000
      statusCommand:
        executable: codex
        args:
          - whoami
          - --json
        timeoutMs: 30000
      # Example: OpenAI rate limit check
      # This would call the OpenAI API to check usage/limits
      # rateLimitCommand:
      #   executable: sh
      #   args:
      #     - -c
      #     - |
      #       curl -s https://api.openai.com/v1/dashboard/billing/credit_grants \
      #         -H "Authorization: Bearer $OPENAI_API_KEY" \
      #         -H "Content-Type: application/json" | \
      #         jq '{limitType: "credits", remaining: .total_available, maxAllowed: .total_granted}'
      #   timeoutMs: 30000
